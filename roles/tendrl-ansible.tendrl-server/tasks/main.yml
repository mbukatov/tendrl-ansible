---
# tasks file for tendrl-server

- debug:
    msg:
      - "Using {{ etcd_fqdn }} as etcd fqdn in tendrl config files."
      - "Using {{ etcd_ip_address }} as etcd ip address in etcd config file."
      - "Using {{ graphite_fqdn }} as graphite fqdn in tendrl config files."

- name: Install tendrl-selinux
  yum:
    name=tendrl-selinux
    state=latest

- include_tasks: firewalld.yml
  when: configure_firewalld_for_tendrl == True
- include_tasks: etcd.yml
- include_tasks: rsyslog.yml
- include_tasks: tendrl-node-agent.yml
- include_tasks: tendrl-api.yml
- include_tasks: tendrl-ui.yml
- include_tasks: tendrl-monitoring-integration.yml
- include_tasks: tendrl-notifier.yml

- name: Enable httpd service
  service:
    name=httpd
    enabled=yes

- name: Start httpd service
  service:
    name=httpd
    state=started
